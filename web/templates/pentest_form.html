{{define "content"}}
<h2>{{if .ID}}Edit Pentest{{else}}Create Pentest{{end}}</h2>
<form method="post" action="/pentests/form">
    {{if .ID}}
    <input type="hidden" name="id" value="{{.ID}}">
    {{end}}
    <div>
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" value="{{.Name}}" required>
    </div>
    <div>
        <label for="description">Description:</label>
        <textarea id="description" name="description" required>{{.Description}}</textarea>
    </div>
    <div>
        <label for="status">Status:</label>
        <input type="text" id="status" name="status" value="{{.Status}}" required>
    </div>
    <div>
        <label for="start_date">Start Date:</label>
        <input type="date" id="start_date" name="start_date" value="{{.StartDate}}" required>
    </div>
    <div>
        <label for="end_date">End Date:</label>
        <input type="date" id="end_date" name="end_date" value="{{.EndDate}}" required>
    </div>
    <div>
        <label for="product_feature_name">Product/Feature Name:</label>
        <input type="text" id="product_feature_name" name="product_feature_name" value="{{.ProductFeatureName}}" required>
    </div>
    <div>
        <label for="stakeholders">Stakeholders:</label>
        <input type="text" id="stakeholders" name="stakeholders" value="{{.Stakeholders}}" required>
    </div>
    <div>
        <label for="jira_ticket">Jira Ticket:</label>
        <input type="text" id="jira_ticket" name="jira_ticket" value="{{.JiraTicket}}" required>
    </div>
    <div>
        <label for="component_description">Component Description:</label>
        <textarea id="component_description" name="component_description" required>{{.ComponentDescription}}</textarea>
    </div>
    <div>
        <label for="threat_modeling">Threat Modeling/Architecture Review:</label>
        <textarea id="threat_modeling" name="threat_modeling" required>{{.ThreatModeling}}</textarea>
    </div>
    <div>
        <label for="reference_info">References:</label>
        <textarea id="reference_info" name="reference_info" required>{{.ReferenceInfo}}</textarea>
    </div>
    <div>
        <label for="out_of_scope">Out of Scope:</label>
        <textarea id="out_of_scope" name="out_of_scope" required>{{.OutOfScope}}</textarea>
    </div>
    <div id="scope-details-container">
        <h3>Scope Details</h3>
        {{range .ScopeDetails}}
        <div>
            <label for="scope_detail_activity">Activity:</label>
            <input type="text" name="scope_detail_activity[]" value="{{.Activity}}" required>
        </div>
        <div>
            <label for="scope_detail_details">Details:</label>
            <input type="text" name="scope_detail_details[]" value="{{.Details}}" required>
        </div>
        {{end}}
    </div>
    <button type="button" id="add-scope-detail">Add Scope Detail</button>
    <div id="security-tools-container">
        <h3>Security Assessment Tooling</h3>
        {{range .SecurityTools}}
        <div>
            <label for="security_tool_tool">Tool:</label>
            <input type="text" name="security_tool_tool[]" value="{{.Tool}}" required>
        </div>
        <div>
            <label for="security_tool_purpose">Purpose:</label>
            <input type="text" name="security_tool_purpose[]" value="{{.Purpose}}" required>
        </div>
        {{end}}
    </div>
    <button type="button" id="add-security-tool">Add Security Tool</button>
    <button type="submit">{{if .ID}}Update Pentest{{else}}Create Pentest{{end}}</button>
</form>
{{end}}
