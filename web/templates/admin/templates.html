{{ define "content" }}
<h1>Manage Report Templates</h1>
<form id="template-form">
    <label for="template-name">Template Name:</label>
    <input type="text" id="template-name" name="template-name" required><br>

    <label for="template-content">Template Content:</label>
    <textarea id="template-content" name="template-content"></textarea><br>

    <button type="submit">Save Template</button>
</form>

<script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script>
<script>
    tinymce.init({
        selector: '#template-content',
        height: 500,
        plugins: 'link image code',
        toolbar: 'undo redo | bold italic | alignleft aligncenter alignright | code'
    });

    document.getElementById('template-form').addEventListener('submit', function(event) {
        event.preventDefault();
        const template = {
            name: document.getElementById('template-name').value,
            content: tinymce.get('template-content').getContent(),
        };
        fetch('/admin/templates/save', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(template),
        }).then(response => {
            if (response.ok) {
                alert('Template saved successfully');
            } else {
                alert('Failed to save template');
            }
        });
    });
</script>
{{ end }}
